/*!
 * =======================================================
 *  RICH TEXT EDITOR 1.1.3
 * =======================================================
 *
 *   Author: Taufik Nurrohman
 *   URL: https://github.com/tovic
 *   License: MIT
 *
 * -- USAGE: ---------------------------------------------
 *
 *   var e = new RTE(document.querySelector('textarea'));
 *
 * -------------------------------------------------------
 *
 */
!function(e,n,t){function $e(e){return n[r+"Element"](e)}function xe(e){return e.toLowerCase()}function me(e){return"string"==typeof e}function ye(e){return 3===e.nodeType}function ke(e){return"undefined"==typeof e}function ze(e){return"function"==typeof e}function Me(e,n){return new RegExp(e,n)}function Ce(e,n){return n=n||"[\\w-:]+",e[z](Me("<\\/"+n+">|<"+n+"(\\s[^<>]*?)?>","gi"),"")[z](/ +/g," ")[z](/^\s*|\s*$/g,"")}function Se(e,n){return e.join(n||"")}function Ne(e,n,t){return e[l](n,t,ce)}function Re(e,n,t){return e[v](n,t)}function Be(e){var o,t=$e(le),i=n[r+"DocumentFragment"](),f=[],u=[],a="";if(me(e)){for(t[s]=e;o=t[d];)u[R](xe(o[x]||"")),f[R](i[g](o));return[f,i,u,e]}for(u in e)(o=e[u])&&(me(o)?(a+=o,t[s]=o,o=t[d]):a+=o[c],f[R](xe(o[x]||"")),i[g](o));return[e,i,f,a]}var be,we,i="__instance__",r="create",f="style",u="minHeight",o="HTML",s="inner"+o,c="outer"+o,a="className",o="EventListener",l="add"+o,v="remove"+o,o="Child",d="first"+o,g="append"+o,h="remove"+o,p="parentNode",b="children",w="childNodes",$="insertBefore",x="nodeName",o="Attribute",m="get"+o,y="set"+o,k="remove"+o,z="replace",M="value",C="length",S="indexOf",N="substring",R="push",B="preventDefault",E="click",A="focus",L="blur",_="select",j="keydown",T="paste",H="error",O="test",D="contenteditable",I="readonly",U="spellcheck",q="placeholder",F="getSelection",K="getRangeAt",X="rangeCount",G="addRange",J="removeAllRanges",P=r+"Range",o="Contents",Q="clone"+o,V="delete"+o,W=_+"Node",Y=W+o,Z="insertNode",ee="cloneRange",ne="collapse",te="setStart",ie="setEnd",re=te+"Before",fe=te+"After",ue=ie+"Before",oe=ie+"After",se=!0,ce=!1,ae=null,le="div",o="Key",ve="ctrl"+o,de="shift"+o,he="keyCode",pe=setTimeout;!function(e){e.version="1.1.3",e[i]={},e.each=function(n,t){return pe(function(){var r,t=e[i];for(r in t)n(t[r],r,t)},0===t?0:t||1),e},e.x="​"}(e[t]=function(o,l){function an(){return be=e[F]&&e[F]()||{},be[X]&&be||ae}function ln(e){return be=an(),be&&be[K](e||0)||ae}function vn(e,n,t){if(e){if(be=an()){var r,f,i=$e(le);for(r=0,f=be[X];f>r;++r)i[g](be[K](r)[Q]());return e=Se(i[s].split(Oe)),e=ke(n)||n?v.f(e):e,ke(t)||t?e:e[z](Me(Xe,"g"),"\n\n")[z](Me(Ge,"g"),"")}return""}return an()+""}function dn(e,n){var r,f,u,o,t=vn(1,0,0),i=Be(t);if(i&&i[0][C]&&(we=ln(),we[V](),we[Z](i[1])),i=i[0],e){for(u=0,o=i[C];o>u;++u)if(r=i[u],xe(r[x])===e)return r;return(ke(n)||n)&&(u=bn(),f=hn(Oe+t),f=f&&f[0]&&f[0][p],f&&xe(f[x])===e&&f!==je)?(f[s]=Se(f[s].split(Oe)),t&&t!==f[s]?wn(u):xn([f]),f):ae}return i[C]?i:ae}function gn(e){return(we=ln())&&(e=1===e?ce:0===e?se:e,we[ne](e)),we}function hn(e,n){if(Ye[A]){var t=Be(e);return(be=an())&&(we=ln(),we[V](),we[Z](t[1]),0===n?gn(1):1===n&&(hn(e,se),gn(0)),be[J](),be[G](we)),t[0]}return ae}function pn(n){try{var t=dn("a"),i=Ce(vn(1,1,0),"a");n=Ce(n[z](/^\s*javascript:/i,""));var f=n[0],u=e.location.hostname;return f=-1!=="/?&#"[S](f)||-1===n[S]("/"),!u||0!==n[S]("//"+u)&&-1===n[S]("://"+u)||(f=1),i||(hn(n,se),i=n),n?(t?t[y]("href",n):t=hn('<a href="'+n+'">'+i+"</a>",se)[0],f?(t[k]("rel"),t[k]("target")):(t[y]("rel","nofollow"),t[y]("target","_blank"))):(t&&(i=t[s],t[p][h](t)),t=hn(i,se)[0]),t}catch(o){}return ae}function bn(){var e,n,t;return(e=ln())?(n=e[ee](),n[Y](je),n[ie](e.startContainer,e.startOffset),t=(n+"")[C],[t,t+(e+"")[C]]):ae}function wn(t){if(t){var r,u,s,c,a,l,i=n[P](),f=0,o=[je];for(i[te](je,0),i[ne](se);!l&&(c=o.pop());)if(ye(c))u=f+c[C],!a&&t[0]>=f&&t[0]<=u&&(i[te](c,t[0]-f),a=1),a&&t[1]>=f&&t[1]<=u&&(i[ie](c,t[1]-f),l=1),f=u;else for(s=c[w][C];s--;)o[R](c[w][s]);r=e[F](),r[J](),r[G](i)}}function $n(){return Be(vn(1,1,0))[0]}function xn(e,n){n=ke(n)||!n;var t=e[0],i=e[e[C]-1];return be=an(),we=ln(),1===e[C]?we[n?Y:W](t):(we[n?fe:re](t),we[n?ue:oe](i)),be[J](),be[G](we),e}function mn(e,n,t){if(Ye[A]){ke(n)&&(n=-1);var u,a,l,i=dn(e),r=vn(1,0,0),f=[];if(0===n||-1===n&&i){if(i){u=i[s],i[p][h](i);var v=Ce(r,e),d=Ce(u,e);if(-1!==d[S](v)&&v[C]<d[C])i=Me("<"+e+"(\\s[^<>]*?)?>","i").exec(i[c]),i=i&&i[1]||"",r=Be([u[N](0,u[S](v)),v,u[N](u[S](v)+v[C])])[0],r[0]&&hn("<"+e+i+">"+(r[0][c]||r[0])+"</"+e+">",0),r[2]&&hn("<"+e+i+">"+(r[2][c]||r[2])+"</"+e+">",1),f=hn(r[1][c]||r[1],se);else{if(f=Be(r),u=$e(le),f&&f[2]&&(l=f[2][C]))for(a=0;l>a;++a)f[2][a]===e?u[s]+=f[0][a][s]:u[g](f[0][a]);f=hn(u[s],se)}}}else(1===n||-1===n&&!i)&&(r=r&&r[z](Me("(\\n|"+Fe+"){2,}","gi"),"</"+e+">"+He+He+"<"+e+">"),f=hn("<"+e+">"+(r||t||"")+"</"+e+">",se));return f[0]||ae}return ae}function yn(e,n){A in e&&(e.selectionStart=e.selectionEnd=ke(n)?e[M][C]:n,e[A]())}function kn(e,n){var t=e[a];return Me("(^|\\s)\\s*"+n+"\\s*(\\s|$)")[O](t)?e:(e[a]=Ce(t+" "+n),e)}function zn(e,n){var t=Ce(e[a][z](Me("(^|\\s)\\s*"+n+"\\s*(\\s|$)","g"),"$1$2"));return t?e[a]=t:e[k]("class"),e}function Mn(e,n,t,i){function u(e){i.apply(this,[e,v,r]),Sn(),je[A](),ze(nn)&&nn(e,v,je),e[B]()}var r=kn($e("a"),n),f=t[1]||t[0];return 0===f[S]("svg:")&&(f=me+f.slice(4)+Ee),r[s]="<span>"+f+"</span>",r.title=e,r.href="javascript:;",i&&(Ne(r,"touchstart",u),Ne(r,"mousedown",u)),[r,i]}function Cn(){je[s]=v.f(o[M])[z](Me(Xe,"gi"),He+He)[z](Me(Ge,"gi"),"")}function Sn(){var e=v.f(je[s]);Ae.tidy&&(e=e[z](Me(Xe,"gi"),"</p>\n\n<p$1>")[z](Me(Ie,"gi"),He+"\n")),o[M]=e}function Nn(e){return xe(e.key||String.fromCharCode(e[he]))}function En(e){var n=e[ve],t=e[de],i=e[he],r=Nn(e);n&&t&&("x"===r||88===i)&&en?(cn.x[1](),e[B]()):t||"enter"!==r&&13!==i||ze(Ze)&&Ze(e,v,o),ze(nn)&&nn(e,v,o),pe(function(){Cn(),wn(v.$[1])},1)}function An(){if(Le[p])return v;kn(o,tn+"-source"),Ne(o,j,En),Ve=Ae.tools;for(We in Ve)if(We=Ve[We],cn[We]){if("x"===We&&!en)continue;_e[g](cn[We][0])}Le[g](je),Rn&&"p"===xe(Rn[x])&&(Rn[$](Bn,o),Rn[p][$](o,Rn),Rn[p][h](Rn)),o[p][$](Le,o),Le[g](o),Le[g](_e),kn(Te,tn+"-d"),Te[s]='<input type="text">',v.d.x();var e=Te[b][0];return e[y](U,ce),Ne(e,E,function(){Ye[H]=ce,zn(Le,H)}),Ne(e,j,function(e){var n=this,t=e[ve],i=e[de],r=e[he],f=Nn(e);t||i||"enter"!==f&&13!==r?i||"escape"!==f&&27!==r&&(n[M][C]||"backspace"!==f&&8!==r)||(v.d.x(1,1),Qe=0,e[B]()):(v.d.x(1,1),Qe&&Qe(e,v,n),Qe=0,n[M]="",ze(nn)&&nn(e,v,je),e[B]())}),Le[g](Te),v}function Ln(){return Le[p]?(Rn&&(Le[p][$](Rn,Le),Rn[$](o,Bn),Rn[h](Bn)),o[f][u]="",o[m](f)||o[k](f),zn(o,tn+"-source"),Re(o,j,En),Le[p][h](Le),v):v}var Qe,Ve,We,v=this,d="⌘",ge="⇧",me='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="',Ee='"></path></svg>',Ae={classes:["rich-text-editor"],tags:["a|abbr|b|br|code|dfn|del|em|i|ins|kbd|mark|p|span|strong|u|var"],blocks:["article|aside|blockquote|figure|figcaption|figure|h[1-6]|header|div|li|[ou]l|p|pre|section|table|tr|th"],attributes:["class|data-[\\w-]+?|href|id|rel|style|target|title"],tools:["b","i","u","x"],text:{b:["Bold",me+"M9 10.344c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2.344v2h2.344zM6.656 4.344v2h2c0.563 0 1-0.438 1-1s-0.438-1-1-1h-2zM10.406 7.188c0.875 0.406 1.438 1.281 1.438 2.281 0 1.406-1.063 2.531-2.469 2.531h-4.719v-9.344h4.188c1.5 0 2.656 1.188 2.656 2.688 0 0.688-0.438 1.406-1.094 1.844z"+Ee,d+"+B"],i:["Italic",me+"M6.656 2.656h5.344v2h-1.875l-2.25 5.344h1.469v2h-5.344v-2h1.875l2.25-5.344h-1.469v-2z"+Ee,d+"+I"],u:["Underline",me+"M3.344 12.656h9.313v1.344h-9.313v-1.344zM8 11.344c-2.219 0-4-1.781-4-4v-5.344h1.656v5.344c0 1.281 1.063 2.313 2.344 2.313s2.344-1.031 2.344-2.313v-5.344h1.656v5.344c0 2.219-1.781 4-4 4z"+Ee,d+"+U"],a:["Link",me+"M11.344 4.656c1.844 0 3.313 1.5 3.313 3.344s-1.469 3.344-3.313 3.344h-2.688v-1.281h2.688c1.125 0 2.063-0.938 2.063-2.063s-0.938-2.063-2.063-2.063h-2.688v-1.281h2.688zM5.344 8.656v-1.313h5.313v1.313h-5.313zM2.594 8c0 1.125 0.938 2.063 2.063 2.063h2.688v1.281h-2.688c-1.844 0-3.313-1.5-3.313-3.344s1.469-3.344 3.313-3.344h2.688v1.281h-2.688c-1.125 0-2.063 0.938-2.063 2.063z"+Ee,d+"+L"],x:["Source",me+"M8 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM12 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344zM4 6.656c0.719 0 1.344 0.625 1.344 1.344s-0.625 1.344-1.344 1.344-1.344-0.625-1.344-1.344 0.625-1.344 1.344-1.344z"+Ee,d+"+"+ge+"+X"]},tidy:1,enter:1,x:1,update:0},Le=$e(le),_e=$e(le),je=$e(le),Te=$e(le),He="<br>",Oe=e[t].x,De="(\\s[^<>]*?)?",Ie="<br"+De+"\\s*\\/?>",Ue="<p"+De+">",qe="<\\/p>",De="\\s*",Fe=De+"(?:"+Ie+")"+De,Ke="^"+De+Ue+"(?:"+Fe+")*"+De+"|"+De+"(?:"+Fe+")*"+qe+De+"$",Xe=De+"(?:"+Fe+")*"+qe+De+Ue+"(?:"+Fe+")*"+De,Ge=De+"(?:"+Ue+"(?:"+Fe+")*|(?:"+Fe+")*"+qe+")"+De,Je=De+Ue+"(?:"+Fe+")*"+De+"(?:"+Fe+")*"+qe+De,Pe=De+Ue+"(?:"+Fe+")*(?:[\\s\\S]*?)(?:"+Fe+")*"+qe+De;v.is={view:se,source:ce,d:ce,e:function(e){var n=an()[A+"Node"];if(!n)return ae;if(ye(n)&&(n=n[p]),n===je){if((n=vn(1,1,0))&&-1!==xe(n)[S]("</"+e+">"))return hn(n,se)[0]}else{if(n[x]&&xe(n[x])===e)return n;for(;n&&n!==je;){if(n[x]&&xe(n[x])===e)return n;n=n[p]}}return ae},focus:ce,blur:se,error:ce},l=l||{};for(We in Ae)ke(l[We])||(Ae[We]=l[We]);var Ye=v.is,Ze=Ae.enter,en=Ae.x,nn=Ae.update,tn=Ae.classes[0],rn=Ae.text||{},fn=Se(Ae.tags,"|"),un=Se(Ae.attributes,"|"),on=Se(Ae.blocks,"|"),sn=0,cn={b:function(){mn("strong")},i:function(){mn("em")},u:function(){mn("u")},a:function(e){var t,i,n=Ce(vn(1,1,0)).split(/\s/)[0];/^[a-z\d]+:\/\/\S+$/[O](n)?dn("a")?mn("a",0):pn(n):Ye.d?v.d.x(1):((t=dn("a"))&&(i=t[m]("href")),De="http://",v.d(De,(i?i[z](/\/+$/,""):De+xe(n))||"",function(e,n,t){pn(t[M])}),pe(function(){i&&Te[b][0][_]()},2))},x:function(e){if(en){var n=je.offsetHeight;n&&(o[f][u]=n+"px"),sn?(v.$[0]=bn(),kn(Le,"view"),zn(Le,"source"),je[A](),wn(v.$[1]),sn=0):(v.$[1]=bn(),kn(Le,"source"),zn(Le,"view"),o[A](),wn(v.$[0]),sn=1),Ye.view=!sn,Ye.source=!!sn,v.d.x(0,1),ze(en)&&en(e,v,sn||0)}}};v.$=[ae,ae],v.$$=function(e,n){var t=[an(),ln(n)];return ke(e)?t:t[e]},v.d=function(e,n,t){var i=Te[b][0];return i[q]=e,i[M]=n,pe(function(){yn(i)},1),Qe=t,v.d.v(1),v},v.d.x=function(e,n){var t=Te[b][0],i=t[M];return i&&!n?(kn(Le,H),Ye[H]=se,Ye.d=se,pe(function(){Ye[A]=ce,Ye[L]=se,t[A](),t[_]()},1)):(zn(Le,"d"),zn(Le,H),Ye.d=ce),Ye[A]=se,Ye[L]=ce,e&&(v[A](),wn(v.$[1])),v},v.d.v=function(e){return kn(Le,"d"),zn(Le,H),Ye[H]=ce,Ye.d=se,v.$[1]=e?bn():ae,v},e[t][i][o.id||o.name||Object.keys(e[t][i])[C]]=v,v.t=function(e,n,t,i){var r=Mn(n[0]+(n[2]?" ("+n[2]+")":""),tn+"-t:"+e,n,t);return ke(i)?i=ae:0>i&&(i=_e[b][C]+i),_e[$](r[0],_e[b][i]||ae),v.t[e]=r[1],v.t[e].e=r[0]};for(We in cn)v.t[We]=cn[We],cn[We]=Mn(rn[We][0]+(rn[We][2]?" ("+rn[We][2]+")":""),tn+"-t:"+We,rn[We],cn[We]),v.t[We].e=cn[We][0];v.f=function(e){return e=Se(e[z](/\r/g,"").split(Oe)),e=e[z](/<([\w-:]+?)(?:\s[^<>]*?)?>\s*<\/([\w-:]+?)>/g,function(e,n,t){return n===t?"":e}),e=e[z](/<code(\s[^<>]*?)?>([\s\S]*?)<\/code>/g,function(e,n,t){return"<code"+(n||"")+">"+t[z](/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")[z](/ /g,"&nbsp;")+"</code>"}),e=e[z](/<(\/?)([\w-:]+?)(\s[^<>]*?)?>/g,function(e,n,t,i){if(t=xe(t),!Me("^("+fn+"|"+on+")$")[O](t))return"";(i=i||"")&&(i=i[z](/\s+([\w-:]+?)(?:="((?:\\.|[^"])*?)"|$)/g,function(e,n,t){return Me("^("+un+")$")[O](n)?e:""}));var r=/^(h[1-6]|th)$/[O](t),f=/^((fig)?caption)$/[O](t),u=n?"":i;return"b"===t||"strong"===t||r?"<"+n+"strong"+u+">"+(r&&n?He+He:""):"i"===t||"em"===t||f?"<"+n+"em"+u+">":Me("^("+fn+")$")[O](t)?"<"+n+t+u+">":Me("^("+on+")$")[O](t)?He+He:""}),e=e[z](Me(Xe,"gi"),"</p><p$1>")[z](Me(Fe,"gi"),He)[z](/\n/g,He)[z](Me("(?:"+Fe+"){3,}","gi"),He+He)[z](Me("^(?:"+Fe+")+|(?:"+Fe+")+$","gi"),"")[z](Me("(?:"+Fe+"){2,}","gi"),"</p><p>")[z](Me(Je,"gi"),""),e=e&&!Me("^"+Pe+"$","gi")[O](e)?"<p>"+e+"</p>":e,e=Be(e),e[3]||""},Cn(),Sn(),kn(Le,tn+" view"),o[y](U,ce),kn(_e,tn+"-tool"),kn(je,tn+"-view"),Ze&&kn(Le,"expand"),je[y](D,se),je[y](U,ce),je[y](q,o[q]||""),Ne(je,A,function(){Ye[A]=se,Ye[L]=ce,kn(Le,A)}),Ne(je,L,function(){Ye[A]=ce,Ye[L]=se,Sn(),zn(Le,A)}),Ne(je,T,function(){pe(function(){Cn();var e=je[s];je[s]="",hn(e,0)},1)}),Ne(je,j,function(e){var u,n=e[ve],t=e[de],i=e[he],r=Le,f=Nn(e);if(!n||t||"b"!==f&&66!==i)if(!n||t||"i"!==f&&73!==i)if(!n||t||"u"!==f&&85!==i)if(!n||t||"l"!==f&&76!==i){if(n&&t&&("x"===f||88===i)&&en)cn.x[1](),e[B]();else if(!t&&("enter"===f||13===i))if(Ze&&(be=an(),we=ln(),hn(He,0),hn(Oe,1),e[B]()),Ze)ze(Ze)&&Ze(e,v,je);else{for(;r=r[p];)if("form"===xe(r[x])){u=r;break}u&&(u.submit(),e[B]())}}else cn.a[1](),e[B]();else cn.u[1](),e[B]();else cn.i[1](),e[B]();else cn.b[1](),e[B]();ze(nn)&&nn(e,v,je),pe(function(){var e=je[s][z](Me(Oe,"g"),"");e&&e!==He||(je[s]=""),Sn()},1)});var Rn=o[p],Bn=$e("a");return An(),v.config=Ae,v.container=Le,v.view=je,v.source=v.target=o,v.tool=_e,v.dialog=Te,v.c=gn,v.e=dn,v.g=Be,v.i=hn,v.m=xn,v.n=$n,v.r=wn,v.s=bn,v.v=vn,v.w=mn,v[r]=An,v.destroy=Ln,v[A]=function(e){if(Ye.view){var t=je[s];je[A](),v.$[1]&&wn(v.$[1]),Ye[A]=se,Ye[L]=ce,0===e?(je[s]="",hn(t,1)):1===e?(je[s]="",hn(t,0)):e===se&&(we=n[P](),we[Y](je),be=an(),be[J](),be[G](we))}else Ye.source&&(o[A](),0===e?yn(o,0):1===e?yn(o,o[M][C]):e===se&&o[_]());return v},v[L]=function(){return Ye.view?(Ye[A]=ce,Ye[L]=se,je[L]()):Ye.source&&o[L](),v},v.set=function(e,n){return e=v.f(e),(Ye.view||1===n)&&(e=e[z](Me(Ke,"gi"),"")[z](Me(Xe,"gi"),He+He)),ke(n)?Ye.view?(je[s]=e,Sn()):Ye.source?(o[M]=e,Cn()):Ye.d&&(Te[b][0][M]=e):0===n?(o[M]=e,Cn()):1===n&&(je[s]=e,Sn()),v},v.get=function(e,n){if(ke(n)){var t;return t=Ye.source?o[M]:Ye.d?Te[b][0][M]:o[M],t?t:e}return 0===n?o[M]||e:1===n?je[s]||e:void 0},v.disable=function(){return je[k](D),o[y](I,se),v},v.enable=function(){return je[y](D,se),o[k](I),be},v})}(window,document,"RTE");